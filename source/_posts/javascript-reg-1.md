title: 正则基础学习
date: 2017-07-20 14:38:42
tags:
---


正则表达式是一个威力巨大的处理字符串的工具，能够高效、神奇得完成对字符串的操作。相比较简单的字符串比较、查找、替换，正则表达式提供了更加强大的处理能力。正则表达式的价值就在于，不用正则来解决问题会让人疯掉，但是用了之后“纠结”的问题已不再是问题了。而且因为正则表达式用的不是一个固化的、具体的字符串来匹配字符串，而是抽象的模式的，所以只要正则写的规则没问题，一般都都能高效的完成任务。

虽然正则表达式看起来确实很像外星文，就像变魔术一样，魔术本身也不神奇，只是的观众不解其中奥妙。学会了其中的规则，我们再去使用，肯定会发出感慨：神奇、复杂、好用。
<!--more-->
正则到底强在哪里呢？我们举个简单的例子：在一串包含数字以及英文字母的字符串中中找出数字并保存在数组中。代码如下：

**不使用正则：**
遍历字符串，利用字符串charAt()的方法将字符串中的数字检索出来，再push数组中，然后继续检索再push到数组中直到结束。
````javascript
    var str = '12 javascript 34 html5 33 php 77 css';
    var arr = [];
    var figure = '';
    for(var i=0;i='0' && str.charAt(i)<='9'){
            figure += str.charAt(i);
        }else{
            if(figure){
            arr.push(tmp);
            figure ='';
        }
    }
}
console.log(arr)//[ "12" , "34" , "5" , "33" , "77" ]
````
**而使用正则只需要如下短短的一行代码**：
````javascript
var arr = str.match(/\d+/g);
````

## 基础知识
### 书写风格

javascript中的正则是Perl5的正则表达式语法的大子集，所以在javascript中创建正则有js风格和petl风格两种。

1. JS 风格： new RegExp('patten','ig')
2. perl风格：/patten/ig

JS风格其实就是通过RegExp对象来表示，而perl风格更普遍的叫法是RegExp直接量。这两个语法都是一样的，只是转义字符的写法不同。

### 什么是正则
正则表达式的结构与数学表达式很类似。

为了方便理解，让我们先来看看大家一个典型的的数学表达式：(x+3)*2+y。一个数学表达式由若干个“项”组成，“项”与“项”之间用加号或减号相连；这里“(x+3)*2”和“y”分别是两个项。每个项又由若干个“因子”组成，因子之间用乘号或除号相连；这里第一个项有两个因子“(x+3)”和“2”，而第二个项只有一个因子“y”。每个因子可以是一个简单的数，一个代数变量，也可以是放在括号里面的另一个表达式，括号中的表达式称为“子表达式”。这里“x+3”就是一个子表达式。

与数学表达式的“因子”相对应，构成正则表达式的部件称为“单位”；“项”则与正则表达式的自表达式相对应。而从逻辑上讲，子表达式之间是串接的关系，一个字符串必须与每个子表达式依次相匹配，才算与这个表达式相匹配。

如上例中斜杠后面的 “ig”是匹配模式，可选的值有3个：'i','g','m'。其含义如下：

- 'i'：为 ignore case，即 忽略大小写。
- 'g'：为 global search，即全局搜索。
- 'm'：为 moltiline search，即多行搜索。

为了更好的学习正则，我们再来学习下正则表达式的一些术语

1.  匹配（matching）
    一个正则表达式“匹配”一个字符串，其实是指这个正则表达式能在字符串中找到匹配文本。

2.  元字符（metacharacter）
    只有在字符组外部并且是在未转义之前的情况下，才是一个元字符。

3. 子表达式（subexpression）
    子表达式指的一般是整个正则表达式中的一部分，通常是括号内的表达式，或者有|分隔的多选分支。子表达式由不可分割的单位组成。

与多选分支不同的是，量词作用的对象是他们之前紧邻的子表达式。而如果量词之前紧邻的是一个括号保卫的自表达式，则不管其多么复杂都被视为一个单元。

一个完整是由一个个“子表达式”组成的，而“子表达式”则是由各种符号组成，上面我们知道，字符就是由“元字符”和“转义字符”组成，按照功能分类有：转义字符、预定义特殊字符、字符类、量词、贪婪模式和非贪婪模式、匹配位置、分组、非捕获性分组、前瞻（零宽断言）。

